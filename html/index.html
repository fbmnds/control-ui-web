<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <link rel="icon" href="/favicon.ico" />

    <script type="text/javascript" src='/js/d3-7.min.js'></script>
    <script type="text/javascript" src='/js/plot-0.6.min.js'></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created D3JS and PlotJS"
    />
<!--
    <link rel="apple-touch-icon" href="/logo192.png" />
-->
    <link rel="manifest" href="/manifest.json" />
    <title>PlotJS App</title>

  </head>

  
  <body>

<!--    
    <script type="text/javascript" async=false defer=false
            src="/js/index.js"></script>
-->    
 <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
 <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>   
 <script>
   
   let data;

   const parse_ts = d3.timeParse("%Y-%m-%d %H:%M:%S");

   const setData = (result) => {
       document.body.append(Plot.plot({
           style: {
               background: "transparent"
           },
           x: {
               transform: d => parse_ts(d)
           },
           y: {
               grid: true
           },
           //z: {},
           color: {
               type: "diverging",
               scheme: "burd"
           },
           marks: [
               //Plot.ruleY([0]),
               Plot.line(result, {x: "ts", y: "temp"})
           ]
       }));
   };

   d3.csv("/heating.csv", d3.autoType).then(setData);

 </script>
     
    
  </body>
</html>
